<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Qr .NET MAUI - Bundle .NET</title>


        <!-- Custom HTML head -->
        
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="Introduction.html"><strong aria-hidden="true">1.</strong> Introduction</a></li><li class="chapter-item expanded "><a href="Beginner.html"><strong aria-hidden="true">2.</strong> Beginner</a></li><li class="chapter-item expanded "><a href="QrLibrary.html"><strong aria-hidden="true">3.</strong> Qr Library</a></li><li class="chapter-item expanded "><a href="QrDesktop.html" class="active"><strong aria-hidden="true">4.</strong> Qr .NET MAUI</a></li><li class="chapter-item expanded "><a href="QrApi.html"><strong aria-hidden="true">5.</strong> Qr API with Blazor Server</a></li><li class="chapter-item expanded "><a href="Thanks.html"><strong aria-hidden="true">6.</strong> Thanks</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Bundle .NET</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="using-that-library-in-a-net-maui-app"><a class="header" href="#using-that-library-in-a-net-maui-app">Using that library in a .NET MAUI App</a></h1>
<h2 id="resources"><a class="header" href="#resources">Resources:</a></h2>
<p><em>MAUI (Xamarin) + UI:</em></p>
<ul>
<li><a href="https://docs.microsoft.com/fr-fr/dotnet/maui/what-is-maui">What is MAUI?</a></li>
<li><a href="https://docs.microsoft.com/en-us/dotnet/maui/xaml/">Introduction to XAML</a></li>
<li><a href="https://docs.microsoft.com/en-us/xamarin/xamarin-forms/user-interface/text/entry">Entry Control</a></li>
<li><a href="https://docs.microsoft.com/en-us/xamarin/xamarin-forms/user-interface/button">Button Control</a></li>
<li><a href="https://docs.microsoft.com/en-us/dotnet/maui/user-interface/controls/graphicsview">GraphicsView Control</a></li>
</ul>
<p><em>Image treatment:</em></p>
<ul>
<li><a href="https://docs.microsoft.com/en-us/dotnet/maui/user-interface/graphics/images">Image treatment with MAUI graphics</a></li>
</ul>
<h2 id="creating-a-net-maui-project"><a class="header" href="#creating-a-net-maui-project">Creating a .NET MAUI Project</a></h2>
<p>Congratulations on coding that library ! Now a library in itself is good but using it in an application may be a bit better, right ?</p>
<p><em>Introducing <strong>QrGenerator2022</strong>, the best QR Code generator on desktop for the year 2022 (yes this is the best name I could come up with)</em></p>
<p>For this purpose, we'll use .NET MAUI, as I said earlier, this is a multiplatform framework allowing us to use .NET to create user applications on many platforms such as Windows, Mac, Android and IOS.</p>
<p>To create a project along with your library, right click on your Solution in the Solution Explorer (Panel on the right) then click on &quot;Add &gt; New Project&quot;, select a .NET MAUI App (Preview) and name it QrGenerator2022.</p>
<p>You should see the project appears in the same panel.</p>
<h2 id="adding-a-dependency-to-a-local-net-library"><a class="header" href="#adding-a-dependency-to-a-local-net-library">Adding a dependency to a local .NET Library</a></h2>
<p>Now we want to use QrLib in that new program in order to generate Qr codes,
since QrLib is in the same &quot;Solution&quot; (Bundle of projects), we don't need NuGet.
Instead, deploy <strong>QrGenerator2022</strong> in the solution explorer panel and right click the <strong>Dependencies</strong> tab, from there click <strong>Add project reference</strong> and select <strong>QrLib</strong>, finish by pressing Ok.</p>
<p>You are now able to use any public function exported by QrLib inside your project, you don't have to worry about any platform, everything is taken care of by the .NET Framework.</p>
<h2 id="creating-your-first-view"><a class="header" href="#creating-your-first-view">Creating your first view</a></h2>
<p>Now, let's see how we can design a &quot;View&quot; (Interface) to generate a test QR Code.
Creating views in .NET MAUI is done through a markup language called XAML (Although you can create your UIs by going only-code), I've linked some useful tutorials in the &quot;Resources&quot; section above.</p>
<p>Start by running the sample program, to do so right click on it and <em>Set as startup project</em> then press F5 or the play button. Now open the MainPage.xaml file to try and figure out how it the UI is rendered from XAML. Using this and the documentation online, you should be able to complete the following tasks.</p>
<h3 id="tasks"><a class="header" href="#tasks">Tasks:</a></h3>
<ul>
<li><input disabled="" type="checkbox"/>
Remove the sample UI (You can keep the grid layout or use your own)</li>
<li><input disabled="" type="checkbox"/>
Add an <em>Entry</em> element (It's a fancy textbox), so that the user can input the QR text.</li>
<li><input disabled="" type="checkbox"/>
Add a button that triggers the QR Code generation, for now, just create the button <em>Clicked</em> handler and leave it as-is in the code.</li>
<li><input disabled="" type="checkbox"/>
Add a <em>GraphicsView</em> element that will be later used to draw the generated QR code, make sure to give it a size !</li>
<li><input disabled="" type="checkbox"/>
Try and make the UI good looking, it's always nice</li>
</ul>
<h2 id="adding-logic-to-your-view"><a class="header" href="#adding-logic-to-your-view">Adding logic to your view</a></h2>
<p><strong>Disclaimer:</strong>
<em>Usually, you design your program by following a pattern (MVVM for example) but for the sake of simplicity we'll do it the dirty way here.</em></p>
<p>Now that we have our fancy UI, let's make it do something useful. If you followed properly, your button should now have a <em>Clicked</em> handler in the code (If you can't find code, deploy the MainPage.xaml on the right and click the .cs file, that's the code-behind).</p>
<p>It's up to you to code this button logic, here's what it should do (feel free to export this in another function and call it from the handler):</p>
<h3 id="tasks-1"><a class="header" href="#tasks-1">Tasks:</a></h3>
<ul>
<li><input disabled="" type="checkbox"/>
Check if the entered text is null</li>
<li><input disabled="" type="checkbox"/>
Create a QrGenerator from QrLib, (you may have to add a using statement)</li>
<li><input disabled="" type="checkbox"/>
Generate a QR from the entry text by calling QrGenerator.FromText()</li>
<li><input disabled="" type="checkbox"/>
(<em>Wait for next step</em>) Pass the byte[] to your Drawable class</li>
<li><input disabled="" type="checkbox"/>
(<em>Wait for next step</em>) Invalidate the GraphicsView so that it is redrawn</li>
</ul>
<p>You now have a byte[] representing the image data, you need to convert it to an actual Image object, then draw it on a canvas. To perform these actions you'll need to be inside a graphical-context.</p>
<h2 id="creating-your-graphical-context"><a class="header" href="#creating-your-graphical-context">Creating your graphical context</a></h2>
<p>Create a class called <strong>QrDrawable</strong> in the MainPage.xaml.cs file, this class is your graphical context and will be used to render the QR code, this class MUST implement <strong>IDrawable</strong> (Visual studio can do it for you if you haven't figured it out yet, just right click on the error line and then click on the lightbulb).</p>
<p>Add a public property to this class with a byte[] type and set its default value to null (Check how-to in the resources). This property will be used to pass the byte array between the graphical context and the view-code.</p>
<p>Go back to the previous tasks, you should now be able to pass the byte[] and call the Invalidate function on your GraphicsView.</p>
<p>You can go then ahead and code the <strong>Draw()</strong> (implementing <strong>IDrawable</strong>) function logic so that it performs the following tasks:</p>
<h3 id="tasks-2"><a class="header" href="#tasks-2">Tasks:</a></h3>
<ul>
<li><input disabled="" type="checkbox"/>
Check if the byte[] property is not null</li>
<li><input disabled="" type="checkbox"/>
Create a MemoryStream from it and call GraphicsPlatform.CurrentService.LoadImageFromStream to get an image from it</li>
<li><input disabled="" type="checkbox"/>
Draw the resulting image on the canvas (Check the resources)</li>
</ul>
<h2 id="you-should-be-done-congrats"><a class="header" href="#you-should-be-done-congrats">You should be done, congrats</a></h2>
<p>If you did everything properly, you can now start your MAUI program, enter text in your entry and click the generate button, you should get a nice looking QR Code. Go ahead and scan it ! You can be proud (and you can go back later on if you want to add features such as generating from a phone number and such.)</p>
<p>If not, go back and figure out what's wrong, you can use breakpoints by pressing F9 and hover any variable to check its value during runtime. Make sure that the button press calls the handler.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="QrLibrary.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next" href="QrApi.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="QrLibrary.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="QrApi.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script type="text/javascript">
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>

        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->


    </body>
</html>
